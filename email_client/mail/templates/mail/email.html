{% extends 'mail/base.html' %}
<!-- {% load static %} -->
{% block title %} Inbox - {{email.sender}} {% endblock %}
{% block body %}

<div class="inbox-body">
    <div class= "heading-inbox row">
        <div class="col-md-8">
            <!-- <div class=""> -->
                <!-- <a class="btn btn-sm btn-primary" disabled><i class="fa fa-reply"></i> Reply</a> -->
                <!-- <a title="" data-placement="top" data-original-title="Trash" class="btn btn-sm disabled" ><i class="fa fa-archive"></i></a> -->
                <a title="" data-placement="top" data-original-title="Archive" class="btn btn-sm disabled" ><i class="fa fa-archive"></i></a>
                <a title="" data-placement="top" data-original-title="Trash" class="btn btn-sm disabled" ><i class="fa fa-trash-o"></i></a>
                <a title="" data-placement="top" data-original-title="Report" class="btn btn-sm disabled" ><i class="fa fa-flag-o"></i></a>
                <a title="" data-placement="top" data-original-title="Print" class="btn btn-sm disabled" ><i class="fa fa-print"></i> </a>
            <!-- </div> -->
        </div>
        <ul class="unstyled inbox-pagination">
            <li><span>{{ order_num }}-10 of 10</span></li>
            <!-- <li><span>1-10 of 10</span></li> -->
            <li>
                {% if prev_email > 0 %}
                <a class="np-btn" href="{% url 'mail:email' prev_email %}"><i class="fa fa-angle-left pagination-left"></i></a>
                {% else %}
                <a class="np-btn" disabled><i class="fa fa-angle-left pagination-left disabled"></i></a>
                {% endif %}
            </li>
            <li>
                {% if next_email > 0 %}
                <a class="np-btn" href="{% url 'mail:email' next_email %}"><i class="fa fa-angle-right pagination-right"></i></a>
                {% else %}
                <a class="np-btn" disabled><i class="fa fa-angle-right pagination-right"></i></a>
                {% endif %}
            </li>
        </ul>
    </div>
    <div class="sender-info">
        <div class="row subject-row">
            <div class="col">
                <h4> {{ email.subject }}</h4>
            </div>
            <div class='col'>
                <div class="pull-right">
                    <a title="" data-placement="top" data-original-title="Reply" class="btn btn-sm disabled" ><i class="fa fa-reply"></i></a>
                    <a title="" data-placement="top" data-original-title="Favorite" class="btn btn-sm disabled" ><i class="fa fa-star"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 email-head">
            <img class='rounded-circle' width='48' height='48' alt='' src="{% static 'img/placeholder.jpg' %}">
            <span class='email-sender'>
                <strong>{{ email.sender }}</strong>
                <span class='sender-address'>{{ email.sender_address }}</span>
                to
                <strong>me</strong>
                <a class="sender-dropdown disabled" href="#">
                    <i class="fa fa-chevron-down"></i>
                </a>
            </span>
            <span class="pull-right">
                    <p class="date"> {{email.time_sent}}</p>
            </span> 
        </div>   
    </div>
    <div class="container-fluid" id="email_container">
        {% include email_fname %}
    </div>
    <div class="email-footer">
        <a class="btn btn-sm disabled"><i class="fa fa-reply"></i> Reply</a>
        <a class="btn btn-sm disabled"><i class="fa fa-arrow-right"></i> Forward</a>
        <a title="" data-placement="top" data-original-title="Print" class="btn btn-sm disabled"><i class="fa fa-print"></i> </a>
        <a title="" data-placement="top" data-original-title="Trash" class="btn btn-sm disabled"><i class="fa fa-trash-o"></i></a>
    </div>
</div>
{% include warning_fname %}
<script src="{% static 'js/warnings.js' %}"></script>
<script>
    // determine if email is a phish
    const n = '{{ user.group_num }}';
    // console.log('{{ email.phish_id }}');
    // const email_id = '{{ email.ref }}'
    const p_detected = ('{{ email.is_phish }}' == 'True');
    // console.log('{{ email.is_phish }}');
    // $(document).ready(function{
    // read_email = '{{ email.is_phish }}';
    // console.log(p_detected);
    if (p_detected){
        // console.log('loading warning');
        p_link_id = '{{ email.phish_id }}';
        load_warning(n,p_link_id);
    }
    initListeners();
    // });
</script>
{% endblock %}